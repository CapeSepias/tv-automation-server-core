// Root playlist/rundown list, see RundownList.tsx
.rundown-list {
	//  the width of the floating right status bar
	--statusBarWidth: 2.1rem;
	--componentWidth: calc(100% - var(--statusBarWidth));
	--defaultSpacing: 20px;
	--defaultItemBackgroundColor: #f6f6f6;
	--descendantItemBackgroundColor: #e5e5e5;
	--treeLinesColor: #dddddd;

	background-color: transparent;
	width: 100%;
	padding-right: var(--statusBarWidth);

	.rundown-list__header {
		background-color: #898989;
		color: #fff;
		padding: 5px var(--defaultSpacing) 7px;
		vertical-align: middle;
	}

	.rundown-list-item__name {
		display: inline-block;
		width: calc(var(--componentWidth) * 0.3);

		.draghandle {
			cursor: grab;
			width: var(--defaultSpacing);

			button {
				all: unset;
				display: inline-flex;
				align-self: center;
				justify-content: center;
				width: inherit;
				overflow: hidden;

				svg {
					height: 1em;
					width: 1em;
					top: 0.125em;
					position: relative;
				}
			}
		}

		.rundown-name {
			margin-left: var(--defaultSpacing);
		}
	}
	.rundown-list-item__showStyle {
		display: inline-block;
		width: calc(var(--componentWidth) * 0.21);
	}
	.rundown-list-item__airTime,
	.rundown-list-item__problems,
	.rundown-list-item__duration,
	.rundown-list-item__created {
		display: inline-block;
		width: calc(var(--componentWidth) * 0.11);
	}
	.rundown-list-item__actions {
		display: inline-grid;
		grid-template-columns: 1fr 1fr;
		width: calc(var(--componentWidth) * 0.05);
	}

	&.droptarget {
		border: 4px dashed green;
	}

	.rundown-list-item__action {
		all: unset;
		display: inline-flex;
		align-self: center;
		cursor: pointer;
		height: 100%;

		&:not(:last-child) {
			margin-right: var(--defaultSpacing);
		}

		svg {
			height: 1em;
			width: 1em;
			top: 0.125em;
			position: relative;
		}

		.resync path {
			fill: black;
		}
	}

	// the actual playlists and rundowns
	.rundown-playlists {
		margin: 0;

		// a rundown playlist, see RundownPlaylistUi.tsx
		.rundown-playlist {
			list-style-type: none;
			margin: 0;
			width: 100%;

			.rundown-playlist__header {
				background-color: var(--defaultItemBackgroundColor);
				padding: 0 var(--defaultSpacing);

				.rundown-playlist__heading {
					display: inline-block;
					margin-left: 0;

					.rundown-playlist__heading-text {
						margin-left: 0.5em;
					}
				}
			}

			.rundown-playlist__rundowns {
				padding: 0;
				margin: 0;
				--leftGutterWidth: calc(2 * var(--defaultSpacing));

				// overrides for rundowns inside of playlists
				.rundown-list-item {
					background-color: var(--descendantItemBackgroundColor);
					border-top: 1px solid #c6c6c6;
					margin-bottom: 0;
					position: relative;
					margin-left: var(--leftGutterWidth);

					&::before,
					&::after {
						content: '';
						position: absolute;
						left: calc(-1 * var(--leftGutterWidth) / 2);
					}

					&::before {
						border-top: 1px dotted var(--treeLinesColor);
						top: calc(var(--leftGutterWidth) / 2);
						width: calc(var(--leftGutterWidth) / 2);
						height: 0;
					}

					&::after {
						border-left: 1px dotted var(--treeLinesColor);
						height: 100%;
						width: 0px;
						top: 0.1em;
					}

					&:last-child::after {
						height: 50%;
					}

					// recalc widths to line up with columns outside of playlists
					.rundown-list-item__name {
						width: calc((var(--componentWidth) - var(--leftGutterWidth)) * 0.3 - var(--leftGutterWidth) / 2);
					}
					.rundown-list-item__showStyle {
						width: calc((var(--componentWidth) + var(--leftGutterWidth)) * 0.21);
					}
					.rundown-list-item__airTime,
					.rundown-list-item__problems,
					.rundown-list-item__duration,
					.rundown-list-item__created {
						width: calc((var(--componentWidth) + var(--leftGutterWidth)) * 0.11);
					}
					.rundown-list-item__actions {
						width: calc((var(--componentWidth) + var(--leftGutterWidth)) * 0.05);
					}
				}
			}
		}

		// a single rundown representation, see RundownListItem.tsx
		// some of these rules might be overridden when a rundown is included in a
		// playlist, see the .rundown-playlist section
		.rundown-list-item {
			background-color: var(--defaultItemBackgroundColor);
			box-shadow: 0px 8px 10px -10px rgba(0, 0, 0, 0.15);
			margin: 0 0 6px;
			padding: 0 var(--defaultSpacing);
			list-style-type: none;
			vertical-align: middle;

			.rundown-list-item__text {
				padding: 7px 0;
			}
			.rundown-list-item__actions {
				padding: 0 0 3px; // cater for icons being larger than the font
			}

			&.unsynced {
				background-image: repeating-linear-gradient(
					-45deg,
					transparent,
					transparent 20px,
					rgba(255, 255, 0, 0.3) 20px,
					rgba(255, 255, 0, 0.3) 40px
				);
			}

			&.drag-preview {
				transform: translate3d(1.1, 1.1, 1.1);
				z-index: 99;

				background: red;
				border: 1px solid red;
			}
		}
	}

	// the area appearing under the playlists and rundown where a rundown can
	// be dropped to move it to a new playlist. See RundownDropZone.tsx
	.rundown-dropzone {
		display: none;

		&.open {
			display: flex;
			border: 4px dashed green;
			height: 61px;
			margin-top: 8px;
			align-items: center;
		}
	}
}
